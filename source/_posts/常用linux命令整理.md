---
title: 常用linux命令整理
date: 2018-07-23 10:41:30
tags: linux
---



目前线上和开发环境都是linux, 已经三四年没有用过windows了.  有的命令功能强大, 但参数多且复杂, 每次使用man查看命令效率并不高, 因此在这里做一些整理(一些简单的命令就不记录了), 以便加深下印象, 后续肯定还要补充的, 目前想到一些先写一些. 



### netstat

netstat应该是使用频率非常高的一个命令, 无论是平时开发或者线上排障都会经常用到, 功能强大.



列出一些常用的命令行选项

```
-a: 所有连接中的socket
-e: 显示网络其他相关信息
-l: 显示所有正在监听的socket
-n: 直接显示ip地址, 而不通过域名服务器
-t: 显示tcp连接
-u: 显示udp连接
-p: 显示程序的pid和程序的名字
```



常用命令:

```bash
# 显示正在监听中的tcp连接, 同时-p命令会显示程序的pid和程序的名字
netstat -tlnp

# 查看服务器的并发请求数及其TCP连接状态
netstat -n | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}'
```

关于tcp连接的各个阶段及状态分析可以单独写一篇文章了, 在此略过, 以后有机会补充.



### lsof

用于查看进程开打的文件，打开文件的进程，进程打开的端口(TCP、UDP)

```
-g  列出GID号进程详情
-u  列出UID号进程详情
-d<文件号> 列出占用该文件号的进程
-p<进程号> 列出指定进程号所打开的文件
+d<目录>  列出目录下被打开的文件
+D<目录>  递归列出目录下被打开的文件
-i<条件>  列出符合条件的进程。（4、6、协议、:端口、 @ip ）
```

常用命令

```
# 查看占用某个端口号的进程:
lsof -i :<port>
# 查看某个进程打开的文件
lsof -p <pid>
```

### top

系统进程监控, 类似于windows下的进程管理器. top使用很简单, 主要对top显示结果中的一些参数做说明:

```
# 查看某一个进程使用-p
top -p <pid>

说明:
VIRT: 进程占用的虚拟内存
RES: 进程占用的物理内存
SHR: 进程使用的共享内存
S: 进程状态. S表示休眠, Z表示僵死, R表示正在运行
P: 按%CPU使用率排序
M: 按%MEM排序
1: 查看各个cpu核的使用情况
```

### df, du

df 用于查看系统使用磁盘的情况, du则是查看某个目录磁盘使用情况

常用命令:

```
df -lh

# 查看某个目录占用的磁盘大小
du -lsh [dir]
```



## 文本相关

下面的一些命令与文本相关, 都是功能十分强大的命令, 且很多都涉及到linux中的正则表达式. 如果正则表达式用的不错, 下面几个命令使用起来应该会比较顺手.

### sort

### uniq

### grep

### find

### awk

### sed





